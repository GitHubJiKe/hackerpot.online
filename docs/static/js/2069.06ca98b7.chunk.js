"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2069],{6870:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(7884);function s(e){var t=e.children;return(0,r.jsx)("div",{className:"App-content",children:t})}var a=n(4729),c=n(4317),i=n(4678),l=n(9346),o=n(7643),u=n(7374),d=n(1637),f=n(2875),h=n(474),x=n(6327),m=n(6547),p=n(6448),v=[["feelsLike","\u4f53\u611f\u6e29\u5ea6","\u2103"],["windDir","\u98ce\u529b\u7b49\u7ea7"],["windSpeed","\u98ce\u901f"],["humidity","\u76f8\u5bf9\u6e7f\u5ea6"],["precip","\u7d2f\u8ba1\u964d\u6c34\u91cf/h","mm"],["pressure","\u5927\u6c14\u538b\u5f3a","\u767e\u5e15"],["vis","\u80fd\u89c1\u5ea6","\u516c\u91cc"],["cloud","\u4e91\u91cf","%"]];function Z(){var e=(0,f.Z)("coords",null),t=(0,d.Z)(e,2),n=t[0],s=t[1],a=(0,f.Z)("city",null),c=(0,d.Z)(a,2),i=c[0],Z=c[1],j=(0,f.Z)("weather",null),w=(0,d.Z)(j,2),k=w[0],y=w[1],N=(0,m.useState)((function(){return n})),b=(0,d.Z)(N,2),S=b[0],C=b[1],g=(0,m.useState)((function(){return k})),L=(0,d.Z)(g,2),z=L[0],q=L[1],A=(0,m.useState)((function(){return i})),B=(0,d.Z)(A,2),D=B[0],T=B[1],W=(0,m.useState)((function(){return!!z})),E=(0,d.Z)(W,2),F=E[0],I=E[1],U=(0,m.useCallback)((0,u.Z)((0,l.Z)().mark((function e(){var t,n,r,s,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.tL)(S);case 2:t=e.sent,n=t.data,r=n.now,s=n.fxLink,r&&(a=(0,o.Z)((0,o.Z)({},r),{},{link:s}),y(a),q(a));case 7:case"end":return e.stop()}}),e)}))),[S,y]),V=(0,m.useCallback)((0,u.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.Bs)(S);case 2:t=e.sent,(n=t.data.location)&&(Z(n[0]),T(n[0]),I(!0));case 5:case"end":return e.stop()}}),e)}))),[S,Z]);(0,h.Z)((0,u.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.Vp)();case 3:(t=e.sent)&&(s((0,p.Z)(t.coords,["latitude","longitude"])),C(t.coords)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))));var G=(0,m.useCallback)((0,u.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return e.next=4,U();case 4:case"end":return e.stop()}}),e)}))),[V,U]);(0,m.useEffect)((function(){S&&G()}),[S,G]);var H=function(){var e=(0,u.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.querySelector(".refreshW"))&&t.classList.add("rotate"),e.next=4,G();case 4:n=setTimeout((function(){t&&t.classList.remove("rotate"),clearTimeout(n)}),1e3);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.jsx)(r.Fragment,{children:F&&z&&(0,r.jsxs)("div",{className:"weatherBox",children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("h2",{children:"\u4eca\u65e5\u5929\u6c14"}),(0,r.jsxs)("div",{style:{fontSize:"0.8rem",color:"#555050"},children:["\u5929\u6c14\u670d\u52a1\u7531",(0,r.jsx)("a",{href:"https://www.qweather.com",children:"\u548c\u98ce\u5929\u6c14"}),"\u9a71\u52a8"]})]}),(0,r.jsxs)("div",{style:{fontSize:"1rem"},children:["\u5f53\u524d\u6240\u5728\uff1a",D.country,"/",D.adm1,"/",D.adm2,"/",D.name]}),(0,r.jsxs)("div",{className:"w-icon",children:[(0,r.jsx)("i",{className:"qi-".concat(z.icon," icon"),style:{fontSize:"6rem"}}),(0,r.jsxs)("div",{className:"w-infos",children:[(0,r.jsx)("label",{className:"temp",children:z.temp}),(0,r.jsx)("label",{className:"text",children:z.text})]})]}),(0,r.jsx)("div",{className:"infos",children:v.map((function(e){var t=(0,d.Z)(e,3),n=t[0],s=t[1],a=t[2];return(0,r.jsxs)("div",{className:"item",children:[(0,r.jsxs)("label",{className:"field",children:[" ",s]}),(0,r.jsx)("label",{className:"val","data-unit":a,children:z[n]})]},n)}))}),(0,r.jsx)("span",{className:"material-symbols-outlined refreshW",style:{float:"right",cursor:"pointer"},onClick:H,title:"\u5237\u65b0",children:"refresh"})]})})}var j=n(4377),w=function(e){return!!window.location.origin.includes("localhost")||!e.title.toLowerCase().includes("test")};var k=function(){return(0,j.Z)("\u9a87\u5ba2\u5730\u9505"),(0,r.jsxs)("div",{className:"App",children:[(0,r.jsx)(a.Z,{}),(0,r.jsxs)(s,{children:[(0,r.jsx)("div",{className:"widgets",children:(0,r.jsx)(Z,{})}),(0,r.jsx)("div",{style:{flex:4,textAlign:"center"},children:i.D.filter(w).map((function(e,t){return(0,r.jsx)("div",{className:"linkcard",children:(0,r.jsx)(c.rU,{to:"/post/".concat(e.id),children:(0,r.jsxs)("label",{style:{fontSize:"1.2rem",cursor:"pointer"},children:[e.title," \u2014\u2014 ",e.datetime]})})},t)}))})]})]})}}}]);
//# sourceMappingURL=2069.06ca98b7.chunk.js.map